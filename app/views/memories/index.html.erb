<% content_for :title, "Memorias" %>

<div class="card">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
    <h3>Memorias del Sistema (SCC-HDF)</h3>
    <a href="/memories/new" class="btn btn-primary">+ Nueva Memoria</a>
  </div>
  
  <table style="margin-top: 1rem;">
    <thead>
      <tr>
        <th>Tipo</th>
        <th>Importancia</th>
        <th>Contenido</th>
        <th>Fecha</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      <% @memories.each do |memory| %>
        <tr>
          <td>
            <span class="pill pill-<%= 
              case memory.memory_type
              when 'long' then 'success'
              when 'semantic' then 'warning'
              when 'episodic' then 'danger'
              else 'success'
              end
            %>">
              <%= memory.memory_type %>
            </span>
          </td>
          <td><%= memory.importance %>/4</td>
          <td style="max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
            <%= memory.content %>
          </td>
          <td><%= memory.created_at.strftime("%d/%m %H:%M") %></td>
          <td>
            <a href="/memories/<%= memory.id %>/edit" class="btn" style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">Editar</a>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  
  <% if @memories.empty? %>
    <p style="text-align: center; color: var(--text-muted); padding: 2rem;">
      No hay memorias.
    </p>
  <% end %>
</div>

<div class="card" style="margin-top: 1rem;">
  <h4>üîç Buscar en Memorias</h4>
  <p style="color: var(--text-muted); font-size: 0.875rem; margin-top: 0.5rem;">
    <% if OllamaService.available? %>
      <span class="pill pill-success">‚óè Ollama conectado</span> - B√∫squeda sem√°ntica disponible
    <% else %>
      <span class="pill pill-warning">‚óè Ollama no disponible</span> - Configura Ollama para b√∫squeda sem√°ntica
    <% end %>
  </p>
</div>
